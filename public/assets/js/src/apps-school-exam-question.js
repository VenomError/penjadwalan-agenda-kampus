import"../../admin.bundle-DI9_jvUJ.js";/* empty css                               */import"../../main-d77jCppw.js";document.addEventListener("DOMContentLoaded",function(){VirtualSelect.init({ele:"#sortBySelect",options:[{label:"All",value:"All"},{label:"MCQ",value:"MCQ"},{label:"Q & A",value:"Q & A"},{label:"Hard",value:"Hard"},{label:"Normal",value:"Normal"},{label:"Medium",value:"Medium"}]}),document.querySelector("#sortBySelect").addEventListener("change",function(){const f=this.value;window.tableManager&&window.tableManager.filterQuestions(f)})});VirtualSelect.init({ele:"#itemTypeSelect",options:[{label:"MCQ",value:"MCQ"},{label:"Q & A",value:"Q & A"}]});VirtualSelect.init({ele:"#difficultLevelSelect",options:[{label:"Normal",value:"Normal"},{label:"Medium",value:"Medium"},{label:"Hard",value:"Hard"}]});VirtualSelect.init({ele:"#statusSelect",options:[{label:"New",value:"New"},{label:"Old",value:"Old"}]});class k{constructor(){this.questions=[],this.filteredQuestions=[],this.modals={},this.currentId=0,this.initializeModals(),this.initializeEventListeners(),this.initializeBulkActions(),this.loadSampleData(),window.tableManager=this}initializeBulkActions(){const e=document.querySelector(".btn-danger.btn-icon");if(!e){console.warn("Bulk delete button not found");return}const t=()=>{document.querySelectorAll('input[id^="checkData"]:checked').length>0?e.classList.remove("d-none"):e.classList.add("d-none")};e.addEventListener("click",()=>{const i=document.querySelectorAll('input[id^="checkData"]:checked');if(i.length===0)return;const o=document.getElementById("deleteQuestionId");if(o){o.value="bulk";const l=document.querySelector("#deleteModal .modal-body p");l&&(l.textContent=`Are you sure you want to delete ${i.length} selected questions?`),this.modals.deleteModal&&this.modals.deleteModal.show()}}),document.addEventListener("change",i=>{(i.target.id==="allCheckData"||i.target.id.startsWith("checkData"))&&t()});const n=document.getElementById("confirmDeleteBtn");if(n){const i=n.cloneNode(!0);n.parentNode.replaceChild(i,n),i.addEventListener("click",()=>{const o=document.getElementById("deleteQuestionId");if(!o)return;const l=o.value;if(l==="bulk"){const s=document.querySelectorAll('input[id^="checkData"]:checked'),c=Array.from(s).map(u=>parseInt(u.id.replace("checkData","")));this.questions=this.questions.filter(u=>!c.includes(u.id));const a=document.getElementById("allCheckData");a&&(a.checked=!1);const d=document.querySelector(".btn-danger.btn-icon");d&&d.classList.add("d-none");const r=document.querySelector("#deleteModal .modal-body p");r&&(r.textContent="Are you sure you want to delete this question?")}else this.deleteQuestion(parseInt(l));this.applyCurrentFilters(),this.renderTable(),this.modals.deleteModal&&this.modals.deleteModal.hide()})}}initializeModals(){["addQuestionModal","overviewQuestionModal","deleteModal"].forEach(t=>{const n=document.getElementById(t);n?(this.modals[t]=new window.bootstrap.Modal(n),t==="addQuestionModal"&&n.addEventListener("hidden.bs.modal",()=>{const i=document.getElementById("questionForm");i&&i.reset();const o=document.getElementById("questionId");o&&(o.value="");const l=document.getElementById("modalTitle");l&&(l.textContent="Add Question");const s=document.getElementById("saveQuestionBtn");s&&(s.textContent="Add Question")})):console.warn(`Modal element with ID '${t}' not found in the DOM`)})}initializeEventListeners(){const e=document.getElementById("createQuestionBtn");e&&e.addEventListener("click",()=>{this.modals.addQuestionModal&&this.modals.addQuestionModal.show()});const t=document.getElementById("questionForm");t&&t.addEventListener("submit",a=>{a.preventDefault(),this.saveQuestion()});const n=document.getElementById("searchInput");n&&n.addEventListener("input",a=>{this.searchQuestions(a.target.value)});const i=document.getElementById("searchButton");i&&i.addEventListener("click",()=>{const a=document.getElementById("searchInput");a&&this.searchQuestions(a.value)});const o=document.getElementById("sortBySelect");o&&o.addEventListener("change",a=>{this.sortQuestions(a.target.value)});const l=document.getElementById("notAMcqCheck");l&&l.addEventListener("change",a=>{const d=document.getElementById("optionsContainer");d&&(d.style.display=a.target.checked?"none":"block");const r=document.getElementById("itemTypeSelect");r&&(r.value=a.target.checked?"Q & A":"MCQ")});const s=document.getElementById("confirmDeleteBtn");s&&s.addEventListener("click",()=>{const a=document.getElementById("deleteQuestionId");if(a){const d=a.value;this.deleteQuestion(parseInt(d)),this.modals.deleteModal&&this.modals.deleteModal.hide()}});const c=document.getElementById("allCheckData");c&&c.addEventListener("change",a=>{document.querySelectorAll('input[id^="checkData"]').forEach(r=>{r.checked=a.target.checked})})}loadSampleData(){const e=[{id:1,text:"What is an important factor of management information system?",options:["Data","System","Process","All of the above"],type:"MCQ",difficulty:"Hard",status:"New"},{id:2,text:"The data Flow Diagram is the basic component of …………… system",options:["Conceptual","Logical","Physical","Sequential"],type:"MCQ",difficulty:"Hard",status:"New"},{id:3,text:"A desirable property of module is?",options:["Independency","Low Cohesiveness","High Coupling","Multi Functional"],type:"MCQ",difficulty:"Hard",status:"New"},{id:4,text:"Which of the following UML diagrams has a static view?",options:["Collaboration Diagram","Use-Case Diagram","State chart Diagram","Activity Diagram"],type:"MCQ",difficulty:"Medium",status:"Old"},{id:5,text:"What is the full form of HTML?",options:["Hyper text markup language","Hyphenation text markup language","Hyphenation test marking language","Hyper text marking language"],type:"MCQ",difficulty:"Hard",status:"New"},{id:6,text:"Is UI/UX a good career?",options:[],type:"Q & A",difficulty:"Normal",status:"Old"},{id:7,text:"Which of the following is not a type of software maintenance?",options:["Corrective","Adaptive","Preventive","Selective"],type:"MCQ",difficulty:"Medium",status:"New"},{id:8,text:"Which language is primarily used for artificial intelligence programming?",options:["Python","C++","Java","Pascal"],type:"MCQ",difficulty:"Hard",status:"New"},{id:9,text:"What is Agile methodology?",options:[],type:"Q & A",difficulty:"Normal",status:"Old"}];this.questions=e,this.currentId=this.questions.length,this.filteredQuestions=[...this.questions],this.renderTable()}filterQuestions(e){if(!e||e==="All"){this.filteredQuestions=[...this.questions],this.renderTable();return}this.filteredQuestions=this.questions.filter(t=>e==="MCQ"||e==="Q & A"?t.type===e:e==="Hard"||e==="Normal"||e==="Medium"?t.difficulty===e:!1),this.renderTable()}renderTable(){const e=document.getElementById("questionsTableBody");if(!e){console.warn("Table body element not found");return}e.innerHTML="";const t=this.filteredQuestions;if(t.length===0){const n=document.createElement("tr");n.innerHTML=`
                <td colspan="7" class="text-center py-4">
                    <div class="d-flex flex-column align-items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" class="mx-auto size-12" viewBox="0 0 48 48">
                            <linearGradient id="SVGID_1__h35ynqzIJzH4_gr1" x1="34.598" x2="15.982" y1="15.982" y2="34.598" gradientUnits="userSpaceOnUse">
                                <stop offset="0" stop-color="#60e8fe"></stop>
                                <stop offset=".033" stop-color="#6ae9fe"></stop>
                                <stop offset=".197" stop-color="#97f0fe"></stop>
                                <stop offset=".362" stop-color="#bdf5ff"></stop>
                                <stop offset=".525" stop-color="#dafaff"></stop>
                                <stop offset=".687" stop-color="#eefdff"></stop>
                                <stop offset=".846" stop-color="#fbfeff"></stop>
                                <stop offset="1" stop-color="#fff"></stop>
                            </linearGradient>
                            <path fill="url(#SVGID_1__h35ynqzIJzH4_gr1)" d="M40.036,33.826L31.68,25.6c0.847-1.739,1.335-3.684,1.335-5.748c0-7.27-5.894-13.164-13.164-13.164
                            S6.688,12.582,6.688,19.852c0,7.27,5.894,13.164,13.164,13.164c2.056,0,3.995-0.485,5.728-1.326l3.914,4.015l4.331,4.331
                            c1.715,1.715,4.496,1.715,6.211,0C41.751,38.321,41.751,35.541,40.036,33.826z"></path>
                            <path fill="none" stroke="#10cfe3" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3"
                            d="M31.95,25.739l8.086,8.086c1.715,1.715,1.715,4.496,0,6.211l0,0c-1.715,1.715-4.496,1.715-6.211,0
                            l-4.331-4.331"></path>
                            <path fill="none" stroke="#10cfe3" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3"
                            d="M7.525,24.511c-1.771-4.694-0.767-10.196,3.011-13.975c3.847-3.847,9.48-4.817,14.228-2.912"></path>
                            <path fill="none" stroke="#10cfe3" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3"
                            d="M30.856,12.603c3.376,5.114,2.814,12.063-1.688,16.565c-4.858,4.858-12.565,5.129-17.741,0.814"></path>
                        </svg>
                        <p class="mt-2 text-center text-gray-500 dark:text-dark-500">No matching records found</p>
                        <p class="text-muted mb-0">We couldn't find any categories matching your search.</p>
                    </div>
                </td>
            `,e.appendChild(n);return}t.forEach((n,i)=>{const o=document.createElement("tr"),l=document.createElement("td");l.innerHTML=`
                <div class="form-check check-primary">
                    <input class="form-check-input" type="checkbox" id="checkData${n.id}" aria-label="checkData${n.id}">
                </div>
            `;const s=document.createElement("td");s.innerHTML=`
                <a data-bs-toggle="collapse" href="#collapseQuestion${n.id}" class="text-reset fw-semibold">${n.text}</a>
                <div class="collapse" id="collapseQuestion${n.id}">
                    ${this.renderOptions(n)}
                </div>
            `;const c=document.createElement("td");c.innerHTML=`<a href="#collapseQuestion${n.id}" data-bs-toggle="collapse" class="text-dark link link-custom-primary">Show All</a>`;const a=document.createElement("td");a.textContent=n.type;const d=document.createElement("td");d.textContent=n.difficulty;const r=document.createElement("td"),u=n.status==="New"?"badge bg-success-subtle text-success border border-success-subtle":"badge bg-light-subtle text-dark border border-dark-subtle";r.innerHTML=`<span class="${u}">${n.status}</span>`;const m=document.createElement("td");m.innerHTML=`
                <div class="dropdown">
                    <button class="btn btn-link text-dark p-0" type="button" data-bs-toggle="dropdown" aria-expanded="false" title="dropdown-button">
                        <i class="ri-more-2-fill"></i>
                    </button>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="#!" class="px-4 py-1 lh-lg d-flex gap-2 align-items-center link link-custom-primary overview-btn" data-id="${n.id}">
                                <i class="ri-eye-line"></i>
                                <span>Overview</span>
                            </a>
                        </li>
                        <li>
                            <a href="#!" class="px-4 py-1 lh-lg d-flex gap-2 align-items-center link link-custom-primary edit-btn" data-id="${n.id}">
                                <i class="ri-pencil-line"></i>
                                Edit
                            </a>
                        </li>
                        <li>
                            <a href="#!" class="px-4 py-1 lh-lg d-flex gap-2 align-items-center link link-custom-danger delete-btn" data-id="${n.id}">
                                <i class="ri-delete-bin-line"></i>
                                <span>Delete</span>
                            </a>
                        </li>
                    </ul>
                </div>
            `,o.appendChild(l),o.appendChild(s),o.appendChild(c),o.appendChild(a),o.appendChild(d),o.appendChild(r),o.appendChild(m),e.appendChild(o)}),this.addActionButtonListeners()}renderOptions(e){if(e.type==="MCQ"){let t="";const n=["A","B","C","D"];return e.options.forEach((i,o)=>{t+=`
                    <div class="form-check radio-primary d-flex align-items-center gap-2 exam-question-check ps-0 ${o===0?"mt-3":"mt-2"}">
                        <input class="form-check-input d-none" type="radio" name="questionCheck${e.id}" id="questionMcq${e.id}${o}">
                        <label class="form-check-label size-10 d-flex align-items-center justify-content-center border rounded-2 text-center flex-shrink-0" for="questionMcq${e.id}${o}">
                            ${n[o]}
                        </label>
                        <label for="questionMcq${e.id}${o}" class="h-10 form-control flex-grow-1 cursor-pointer">
                            ${i}
                        </label>
                    </div>
                `}),t}else return`
                <div class="mt-3">
                    <label for="qaInput${e.id}" class="form-label d-none">${e.text}</label>
                    <textarea class="form-control" id="qaInput${e.id}" rows="3" placeholder="Write your ans..."></textarea>
                </div>
            `}addActionButtonListeners(){document.querySelectorAll(".overview-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=parseInt(e.getAttribute("data-id"));this.showOverview(n)})}),document.querySelectorAll(".edit-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=parseInt(e.getAttribute("data-id"));this.editQuestion(n)})}),document.querySelectorAll(".delete-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=parseInt(e.getAttribute("data-id")),i=document.getElementById("deleteQuestionId");if(i){i.value=n;const o=document.querySelector("#deleteModal .modal-body p");o&&(o.textContent="Are you sure you want to delete this question?"),this.modals.deleteModal&&this.modals.deleteModal.show()}})}),document.querySelectorAll('input[id^="checkData"]').forEach(e=>{e.addEventListener("change",()=>{const t=document.querySelectorAll('input[id^="checkData"]:checked'),n=document.querySelector(".btn-danger.btn-icon");n&&(t.length>0?n.classList.remove("d-none"):n.classList.add("d-none"))})})}showOverview(e){const t=this.questions.find(o=>o.id===e);if(!t)return;const n=document.getElementById("overviewQuestionText");if(!n){console.warn("Overview question text element not found");return}n.textContent=`Q${e}. ${t.text}`;const i=document.getElementById("overviewOptionContainer");if(!i){console.warn("Overview option container not found");return}if(i.innerHTML="",t.type==="MCQ"){const o=["A","B","C","D"];t.options.forEach((l,s)=>{i.innerHTML+=`
                    <div class="form-check radio-primary d-flex align-items-center gap-2 exam-question-check ps-0 ${s===0?"mt-3":"mt-2"}">
                        <input class="form-check-input d-none" type="radio" name="questionCheck" id="questionMcqModal${s+1}">
                        <label class="form-check-label size-10 d-flex align-items-center justify-content-center border rounded-2 text-center flex-shrink-0" for="questionMcqModal${s+1}">
                            ${o[s]}
                        </label>
                        <label for="questionMcqModal${s+1}" class="h-10 form-control flex-grow-1 cursor-pointer">
                            ${l}
                        </label>
                    </div>
                `})}else i.innerHTML=`
                <div class="mt-3">
                    <textarea class="form-control" rows="3" placeholder="Write your ans..."></textarea>
                </div>
            `;this.modals.overviewQuestionModal&&this.modals.overviewQuestionModal.show()}editQuestion(e){const t=this.questions.find(u=>u.id===e);if(!t)return;const n=document.getElementById("questionId"),i=document.getElementById("questionText"),o=document.getElementById("notAMcqCheck"),l=document.getElementById("optionsContainer"),s=document.getElementById("itemTypeSelect"),c=document.getElementById("difficultLevelSelect"),a=document.getElementById("statusSelect"),d=document.getElementById("modalTitle"),r=document.getElementById("saveQuestionBtn");if(n&&(n.value=t.id),i&&(i.value=t.text),t.type==="MCQ"){o&&(o.checked=!1),l&&(l.style.display="block");for(let u=0;u<4;u++){const m=document.getElementById(`option${u+1}`);m&&(m.value=t.options[u]||"")}}else o&&(o.checked=!0),l&&(l.style.display="none");s&&(s.value=t.type),c&&(c.value=t.difficulty),a&&(a.value=t.status),d&&(d.textContent="Edit Question"),r&&(r.textContent="Update Question"),this.modals.addQuestionModal&&this.modals.addQuestionModal.show()}saveQuestion(){const e=document.getElementById("questionId"),t=document.getElementById("questionText"),n=document.getElementById("notAMcqCheck");if(!e||!t||!n){console.warn("Required form elements not found");return}const i=e.value,o=t.value.trim(),l=!n.checked;if(!o){alert("Please enter a question");return}let s=[];if(l){const p=document.getElementById("option1"),y=document.getElementById("option2"),g=document.getElementById("option3"),v=document.getElementById("option4");if(!p||!y||!g||!v){console.warn("Option elements not found");return}if(s=[p.value.trim(),y.value.trim(),g.value.trim(),v.value.trim()],s.some(b=>!b)){alert("Please fill all options");return}}const c=document.getElementById("itemTypeSelect"),a=document.getElementById("difficultLevelSelect"),d=document.getElementById("statusSelect");if(!c||!a||!d){console.warn("Select elements not found");return}const r=c.value,u=a.value,m=d.value;if(!r||!u||!m){alert("Please select all required fields");return}const h={text:o,options:s,type:r,difficulty:u,status:m};if(i){h.id=parseInt(i);const p=this.questions.findIndex(y=>y.id===h.id);p!==-1&&(this.questions[p]=h)}else this.currentId++,h.id=this.currentId,this.questions.unshift(h);this.applyCurrentFilters(),this.renderTable(),this.modals.addQuestionModal&&this.modals.addQuestionModal.hide()}deleteQuestion(e){this.questions=this.questions.filter(t=>t.id!==e),this.applyCurrentFilters(),this.renderTable()}applyCurrentFilters(){const e=document.querySelector("#sortBySelect"),t=e?e.value:"All";if(!t||t==="All"){this.filteredQuestions=[...this.questions];return}this.filteredQuestions=this.questions.filter(n=>t==="MCQ"||t==="Q & A"?n.type===t:t==="Hard"||t==="Normal"||t==="Medium"?n.difficulty===t:!1)}searchQuestions(e){if(!e||e.trim()===""){this.applyCurrentFilters(),this.renderTable();return}e=e.toLowerCase().trim();const n=(this.filteredQuestions.length>0?this.filteredQuestions:[...this.questions]).filter(o=>o.text.toLowerCase().includes(e)||o.type.toLowerCase().includes(e)||o.difficulty.toLowerCase().includes(e)||o.status.toLowerCase().includes(e)||o.options&&o.options.some(l=>l.toLowerCase().includes(e))),i=this.filteredQuestions;this.filteredQuestions=n,this.renderTable(),(n.length===0||e==="")&&(this.filteredQuestions=i)}renderFilteredQuestions(e){this.filteredQuestions=e,this.renderTable()}sortQuestions(e){if(!e){this.renderTable();return}const[t,n]=e.split("-"),i=[...this.questions];i.sort((o,l)=>{let s=0;switch(t){case"difficulty":const c={Easy:1,Normal:2,Medium:3,Hard:4};s=c[o.difficulty]-c[l.difficulty];break;case"type":s=o.type.localeCompare(l.type);break;case"status":s=o.status==="New"?-1:1;break;default:return 0}return n==="desc"?-s:s}),this.renderFilteredQuestions(i)}}document.addEventListener("DOMContentLoaded",()=>{try{const e=new k}catch(e){console.error("Error initializing TableManager:",e)}const f=document.getElementById("sortBySelect");f&&f.addEventListener("change",function(){const e=document.querySelector("#sortBySelect");if(e){const t=e.value;window.tableManager.filterQuestions(t)}})});
