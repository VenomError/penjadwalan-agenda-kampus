import{c as m,i as u}from"../../admin.bundle-DI9_jvUJ.js";/* empty css                               */import"../../main-d77jCppw.js";VirtualSelect.init({ele:"#genderSelect",options:[{label:"Male",value:"Male"},{label:"Female",value:"Female"}]});class g{constructor(t,e={}){this.container=document.getElementById(t),this.options={itemsPerPage:e.itemsPerPage||10,searchField:e.searchField||"searchInvoiceInput",addBtnModal:e.addBtnModal||"leadCreateModal",deleteModal:e.deleteModal||"deleteModal",...e},this.currentPage=1,this.data=[],this.filteredData=[],this.currentEditId=null,this.currentDeleteId=null,this.sortColumn=null,this.sortDirection="asc",this.init()}init(){this.loadData(),this.initEventListeners(),this.renderTable(),this.initSortableColumns()}loadData(){this.data=[{id:1,parentName:"Tina McPeek",studentName:"Dorothy Daley",studentImage:"assets/images/avatar/user-1.png",relation:"Mother",occupation:"Nurse",gender:"Female",email:"tina@gmail.com",phone:"+ 1541151542",address:"Belgium"},{id:2,parentName:"Elmer McPeek",studentName:"Dorothy Daley",studentImage:"assets/images/avatar/user-1.png",relation:"Father",occupation:"Director",gender:"Male",email:"elmer@gmail.com",phone:"+ 1541151542",address:"Belgium"},{id:3,parentName:"Paul Balls",studentName:"Silvia Balls",studentImage:"assets/images/avatar/user-5.png",relation:"Father",occupation:"Office Manager",gender:"Male",email:"paulballs@gmail.com",phone:"+ 544514457",address:"Poland"},{id:4,parentName:"Judy Soto",studentName:"Robert Soto",studentImage:"",relation:"Mother",occupation:"Assistant Manager",gender:"Female",email:"judy@gmail.com",phone:"+ 2451514574",address:"Romania"},{id:5,parentName:"John Harper",studentName:"Emily Harper",studentImage:"assets/images/avatar/user-8.png",relation:"Father",occupation:"Account Manager",gender:"Male",email:"johnh@gmail.com",phone:"+ 1625151523",address:"Mexico"},{id:6,parentName:"Amanda Hanson",studentName:"Michael Hanson",studentImage:"assets/images/avatar/user-14.png",relation:"Mother",occupation:"Coordinator",gender:"Female",email:"amanda@gmail.com",phone:"+ 1712251525",address:"Ukraine"},{id:7,parentName:"Clarissa Lee",studentName:"Jessica Lee",studentImage:"assets/images/avatar/user-15.png",relation:"Mother",occupation:"Nurse",gender:"Female",email:"clarissa@gmail.com",phone:"+ 1845351623",address:"Ukraine"},{id:8,parentName:"Samuel Ellis",studentName:"Daniel Ellis",studentImage:"",relation:"Father",occupation:"Principal",gender:"Male",email:"samuel@gmail.com",phone:"+ 1945151627",address:"Italy"},{id:9,parentName:"Jacque Carle",studentName:"Olivia Carle",studentImage:"assets/images/avatar/user-17.png",relation:"Mother",occupation:"Financial Analyst",gender:"Female",email:"jacque@gmail.com",phone:"+ 1741251823",address:"Hungary"},{id:10,parentName:"Joseph Wilson",studentName:"Ethan Wilson",studentImage:"assets/images/avatar/user-4.png",relation:"Father",occupation:"Human Resources",gender:"Male",email:"joseph@gmail.com",phone:"+ 1815351923",address:"Spain"},{id:11,parentName:"Nancy Smith",studentName:"Charles Smith",studentImage:"assets/images/avatar/user-19.png",relation:"Mother",occupation:"Teacher",gender:"Female",email:"nancy@gmail.com",phone:"+ 1952362024",address:"Germany"},{id:12,parentName:"David Brown",studentName:"Sophia Brown",studentImage:"assets/images/avatar/user-20.png",relation:"Father",occupation:"Software Engineer",gender:"Male",email:"david@gmail.com",phone:"+ 1963472125",address:"France"},{id:13,parentName:"Patricia Davis",studentName:"Benjamin Davis",studentImage:"assets/images/avatar/user-21.png",relation:"Mother",occupation:"Marketing Manager",gender:"Female",email:"patricia@gmail.com",phone:"+ 1974582226",address:"Netherlands"},{id:14,parentName:"Michael Martinez",studentName:"Emma Martinez",studentImage:"assets/images/avatar/user-22.png",relation:"Father",occupation:"Doctor",gender:"Male",email:"michael@gmail.com",phone:"+ 1985692327",address:"Sweden"},{id:15,parentName:"Barbara Taylor",studentName:"Mason Taylor",studentImage:"assets/images/avatar/user-23.png",relation:"Mother",occupation:"Graphic Designer",gender:"Female",email:"barbara@gmail.com",phone:"+ 1996702428",address:"Norway"},{id:16,parentName:"Christopher Thomas",studentName:"Ava Thomas",studentImage:"assets/images/avatar/user-24.png",relation:"Father",occupation:"Chef",gender:"Male",email:"christopher@gmail.com",phone:"+ 1907812529",address:"Finland"},{id:17,parentName:"Lisa Lee",studentName:"Isabella Lee",studentImage:"assets/images/avatar/user-25.png",relation:"Mother",occupation:"Project Manager",gender:"Female",email:"lisa@gmail.com",phone:"+ 1918922630",address:"Denmark"},{id:18,parentName:"Joshua Clark",studentName:"Lucas Clark",studentImage:"assets/images/avatar/user-28.png",relation:"Father",occupation:"Dentist",gender:"Male",email:"joshua@gmail.com",phone:"+ 1941252933",address:"Ireland"}],this.filteredData=[...this.data]}initEventListeners(){const t=document.getElementById(this.options.searchField);t&&t.addEventListener("input",()=>this.handleSearch(t.value));const e=document.querySelector("#leadCreateModal form");e&&e.addEventListener("submit",s=>this.handleFormSubmit(s));const a=document.getElementById("imageInput");a&&a.addEventListener("change",this.handleImageUpload);const i=document.getElementById(this.options.deleteModal);if(i){i.addEventListener("show.bs.modal",o=>{this.currentDeleteId=o.relatedTarget.dataset.id});const s=i.querySelector(".btn-danger");s&&s.addEventListener("click",()=>this.deleteItem(this.currentDeleteId))}this.initGenderSelect(),this.initPaginationEvents()}initSortableColumns(){document.querySelectorAll("th[data-sort]").forEach(e=>{if(e.addEventListener("click",()=>{const a=e.dataset.sort;this.handleSort(a)}),e.style.cursor="pointer",e.classList.add("sortable"),!e.querySelector(".sort-icon")){const a=document.createElement("span");a.className="sort-icon ms-2",e.appendChild(a)}})}handleSort(t){this.sortColumn===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortColumn=t,this.sortDirection="asc"),this.sortData(),this.updateSortIndicators(),this.currentPage=1,this.renderTable()}sortData(){const t=this.sortColumn,e=this.sortDirection;t&&this.filteredData.sort((a,i)=>{let s=a[t],o=i[t];return typeof s=="string"&&typeof o=="string"&&(s=s.toLowerCase(),o=o.toLowerCase()),s<o?e==="asc"?-1:1:s>o?e==="asc"?1:-1:0})}updateSortIndicators(){if(document.querySelectorAll("th.sortable").forEach(t=>{const e=t.querySelector(".sort-icon");e&&(e.innerHTML="",t.classList.remove("sorted-asc","sorted-desc"))}),this.sortColumn){const t=document.querySelector(`th[data-sort="${this.sortColumn}"]`);if(t){const e=t.querySelector(".sort-icon");if(e){const a=this.sortDirection==="asc"?"arrow-up":"arrow-down";e.innerHTML=`<i data-lucide="${a}" class="size-4"></i>`,t.classList.add(`sorted-${this.sortDirection}`),m({icons:u})}}}}initGenderSelect(){const t=document.getElementById("genderSelect");if(t){const e=`
          <select class="form-select" required>
            <option value="">Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        `;t.innerHTML=e}}initPaginationEvents(){document.addEventListener("click",t=>{if(t.target.closest(".pagination")){const e=t.target.closest(".page-link");if(e)if(t.preventDefault(),e.textContent.includes("Previous"))this.goToPage(this.currentPage-1);else if(e.textContent.includes("Next"))this.goToPage(this.currentPage+1);else{const a=parseInt(e.textContent);isNaN(a)||this.goToPage(a)}}if(t.target.closest(".btn-sub-primary")){const e=t.target.closest("tr"),a=parseInt(e.dataset.id);this.editItem(a)}if(t.target.closest(".btn-sub-danger")){const e=t.target.closest("tr");t.target.closest(".btn-sub-danger").dataset.id=e.dataset.id}})}handleSearch(t){t=t.toLowerCase().trim(),t===""?this.filteredData=[...this.data]:this.filteredData=this.data.filter(e=>e.parentName.toLowerCase().includes(t)||e.studentName.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.relation.toLowerCase().includes(t)||e.occupation.toLowerCase().includes(t)),this.sortColumn&&this.sortData(),this.currentPage=1,this.renderTable()}handleFormSubmit(t){t.preventDefault();const e=t.target,a=new FormData(e),i=document.querySelector("#genderSelect select"),s=document.getElementById("genderSelectError");if(i.value)s.style.display="none";else{s.style.display="block";return}const o={id:this.currentEditId||this.data.length+1,parentName:a.get("parentsInput"),studentName:a.get("studentNameInput"),studentImage:document.getElementById("imagePreview").src||"",relation:a.get("relationInput"),occupation:a.get("occupationInput"),gender:i.value,email:a.get("email"),phone:a.get("phoneNumberInput"),address:"Not specified"};if(this.currentEditId){const d=this.data.findIndex(n=>n.id===this.currentEditId);d!==-1&&(this.data[d]=o),this.currentEditId=null}else this.data.unshift(o);e.reset(),document.getElementById("imagePreview").style.display="none",document.getElementById("uploadIcon").style.display="block",window.bootstrap.Modal.getInstance(document.getElementById("leadCreateModal")).hide(),this.filteredData=[...this.data],this.sortColumn&&this.sortData(),this.renderTable()}handleImageUpload(t){const e=t.target.files[0];if(e){const a=new FileReader;a.onload=function(i){const s=document.getElementById("imagePreview"),o=document.getElementById("uploadIcon");s.src=i.target.result,s.style.display="block",o.style.display="none"},a.readAsDataURL(e)}}editItem(t){const e=this.data.find(l=>l.id===t);if(!e)return;this.currentEditId=t,document.getElementById("parentsInput").value=e.parentName,document.getElementById("studentNameInput").value=e.studentName,document.getElementById("relationInput").value=e.relation,document.getElementById("occupationInput").value=e.occupation,document.getElementById("email").value=e.email,document.getElementById("phoneNumberInput").value=e.phone;const a=document.querySelector("#genderSelect select");a&&(a.value=e.gender);const i=document.getElementById("imagePreview"),s=document.getElementById("uploadIcon");e.studentImage?(i.src=e.studentImage,i.style.display="block",s.style.display="none"):(i.style.display="none",s.style.display="block"),new window.bootstrap.Modal(document.getElementById("leadCreateModal")).show()}deleteItem(t){t=parseInt(t),this.data=this.data.filter(e=>e.id!==t),this.filteredData=this.filteredData.filter(e=>e.id!==t),this.renderTable()}goToPage(t){const e=Math.ceil(this.filteredData.length/this.options.itemsPerPage);t<1&&(t=1),t>e&&(t=e),this.currentPage=t,this.renderTable()}renderTable(){const t=document.querySelector("table tbody");if(!t)return;const e=(this.currentPage-1)*this.options.itemsPerPage,a=e+this.options.itemsPerPage,i=this.filteredData.slice(e,a),s=Math.ceil(this.filteredData.length/this.options.itemsPerPage);let o="";i.length===0?o=`<tr><td colspan="9" class="text-center py-4">
                    <div class="d-flex flex-column align-items-center">
                 <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" class="mx-auto size-12" viewBox="0 0 48 48">
                                                <linearGradient id="SVGID_1__h35ynqzIJzH4_gr1" x1="34.598" x2="15.982" y1="15.982" y2="34.598" gradientUnits="userSpaceOnUse">
                                                    <stop offset="0" stop-color="#60e8fe"></stop>
                                                    <stop offset=".033" stop-color="#6ae9fe"></stop>
                                                    <stop offset=".197" stop-color="#97f0fe"></stop>
                                                    <stop offset=".362" stop-color="#bdf5ff"></stop>
                                                    <stop offset=".525" stop-color="#dafaff"></stop>
                                                    <stop offset=".687" stop-color="#eefdff"></stop>
                                                    <stop offset=".846" stop-color="#fbfeff"></stop>
                                                    <stop offset="1" stop-color="#fff"></stop>
                                                </linearGradient>
                                                <path fill="url(#SVGID_1__h35ynqzIJzH4_gr1)" d="M40.036,33.826L31.68,25.6c0.847-1.739,1.335-3.684,1.335-5.748c0-7.27-5.894-13.164-13.164-13.164	S6.688,12.582,6.688,19.852c0,7.27,5.894,13.164,13.164,13.164c2.056,0,3.995-0.485,5.728-1.326l3.914,4.015l4.331,4.331	c1.715,1.715,4.496,1.715,6.211,0C41.751,38.321,41.751,35.541,40.036,33.826z"></path>
                                                <path fill="none" stroke="#10cfe3" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3" d="M31.95,25.739l8.086,8.086c1.715,1.715,1.715,4.496,0,6.211l0,0c-1.715,1.715-4.496,1.715-6.211,0	l-4.331-4.331"></path>
                                                <path fill="none" stroke="#10cfe3" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3" d="M7.525,24.511c-1.771-4.694-0.767-10.196,3.011-13.975c3.847-3.847,9.48-4.817,14.228-2.912"></path>
                                                <path fill="none" stroke="#10cfe3" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3" d="M30.856,12.603c3.376,5.114,2.814,12.063-1.688,16.565c-4.858,4.858-12.565,5.129-17.741,0.814"></path>
                                            </svg>
                                            <p class="mt-2 text-center text-gray-500 dark:text-dark-500">No matching records found</p>
                        <p class="text-muted mb-0">We couldn't find any categories matching your search.</p>
                    </div>
                </td></tr>`:i.forEach(n=>{o+=`
            <tr data-id="${n.id}">
              <td>${n.parentName}</td>
              <td>
                <div class="d-flex align-items-center gap-3">
                  ${n.studentImage?`<img src="${n.studentImage}" loading="lazy" alt="" class="size-8 rounded-pill">`:`<div class="size-8 rounded-pill bg-light-subtle fs-12 fw-semibold text-dark d-flex justify-content-center align-items-center">${n.studentName.split(" ").map(r=>r[0]).join("")}</div>`}
                  <h6 class="mb-0"><a href="apps-school-students-overview.html" class="text-body">${n.studentName}</a></h6>
                </div>
              </td>
              <td>${n.relation}</td>
              <td>${n.occupation}</td>
              <td>${n.gender}</td>
              <td>${n.email}</td>
              <td>${n.phone}</td>
              <td>${n.address}</td>
              <td>
                <div class="d-flex align-items-center gap-2">
                  <button class="btn btn-sub-primary size-8 btn-icon"><i class="ri-pencil-line"></i></button>
                  <button class="btn btn-sub-danger size-8 btn-icon" data-bs-toggle="modal" data-bs-target="#deleteModal" data-id="${n.id}"><i class="ri-delete-bin-line"></i></button>
                </div>
              </td>
            </tr>
          `}),t.innerHTML=o;const l=document.querySelector("#paginationInfo p");if(l){const n=this.filteredData.length>0?e+1:0,r=Math.min(a,this.filteredData.length);l.innerHTML=`Showing <b class="me-1">${n}-${r}</b>of<b class="ms-1">${this.filteredData.length}</b> Results`}const d=document.querySelector(".pagination");if(d){let n=`
          <li class="page-item ${this.currentPage===1?"disabled":""}">
            <a class="page-link" href="#!"><i data-lucide="chevron-left" class="size-4"></i> Previous</a>
          </li>
        `;for(let r=1;r<=s;r++)n+=`
            <li class="page-item ${this.currentPage===r?"active":""}">
              <a class="page-link" href="#!">${r}</a>
            </li>
          `;n+=`
          <li class="page-item ${this.currentPage===s?"disabled":""}">
            <a class="page-link" href="#!">Next <i data-lucide="chevron-right" class="size-4"></i></a>
          </li>
        `,d.innerHTML=n,m({icons:u})}this.sortColumn&&this.updateSortIndicators()}exportData(){return JSON.stringify(this.data,null,2)}importData(t){try{const e=JSON.parse(t);return Array.isArray(e)?(this.data=e,this.filteredData=[...this.data],this.currentPage=1,this.renderTable(),!0):!1}catch(e){return console.error("Error importing data:",e),!1}}}document.addEventListener("DOMContentLoaded",function(){const c=new g("parent-table-container",{itemsPerPage:10,searchField:"searchInvoiceInput",addBtnModal:"leadCreateModal",deleteModal:"deleteModal"});window.parentsTable=c});
