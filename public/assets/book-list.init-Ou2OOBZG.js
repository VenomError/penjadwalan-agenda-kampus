import{c as C,i as E}from"./admin.bundle-DI9_jvUJ.js";document.addEventListener("DOMContentLoaded",()=>{window.VirtualSelect&&document.getElementById("sortBySelect")&&VirtualSelect.init({ele:"#sortBySelect",options:[{label:"All",value:"All"},{label:"Newest",value:"Newest"},{label:"Oldest",value:"Oldest"},{label:"Popular Book",value:"Popular Book"},{label:"Best Sales",value:"Best Sales"}]})});const g=[{title:"Swan Song",author:"David Grann",image:"assets/images/school/book/img-01.jpg",rating:5,reviews:98,price:47.99},{title:"The Wager: A Tale of Shipwreck, Mutiny and Murder",author:"Elin Hilderbrand",image:"assets/images/school/book/img-02.jpg",rating:5,reviews:147,price:29.99},{title:"The Friday Afternoon Club: A Family Memoir",author:"Griffin Dunne",image:"assets/images/school/book/img-03.jpg",rating:4.5,reviews:213,price:30},{title:"Not in Love",author:"Ali Hazelwood",image:"assets/images/school/book/img-04.jpg",rating:4.5,reviews:97,price:17.99},{title:"This Summer Will Be Different",author:"Carley Fortune",image:"assets/images/school/book/img-05.jpg",rating:4.5,reviews:179,price:21},{title:"Reckless",author:"Lauren Roberts",image:"assets/images/school/book/img-06.jpg",rating:4.5,reviews:236,price:39.99},{title:"Evenings and Weekends: A Novel",author:"Ois√≠n McKenna",image:"assets/images/school/book/img-07.jpg",rating:4.5,reviews:46,price:21.49},{title:"One Dark Window",author:"Rachel Gillig",image:"assets/images/school/book/img-08.jpg",rating:4.5,reviews:74,price:49.99},{title:"Two Twisted Crowns",author:"Rachel Gillig",image:"assets/images/school/book/img-09.jpg",rating:4.5,reviews:39,price:17.49},{title:"All the Colors of the Dark",author:"Chris Whitaker",image:"assets/images/school/book/img-10.jpg",rating:4.5,reviews:798,price:33.49},{title:"Hexed",author:"Emily McIntire",image:"assets/images/school/book/img-11.jpg",rating:4.5,reviews:465,price:14.67},{title:"The Creative Act: A Way of Being",author:"Rick Rubin",image:"assets/images/school/book/img-12.jpg",rating:4.5,reviews:341,price:25.32},{title:"The Silent Patient",author:"Alex Michaelides",image:"assets/images/school/book/img-01.jpg",rating:4.5,reviews:287,price:22.99},{title:"Where the Crawdads Sing",author:"Delia Owens",image:"assets/images/school/book/img-02.jpg",rating:5,reviews:312,price:19.99},{title:"The Midnight Library",author:"Matt Haig",image:"assets/images/school/book/img-03.jpg",rating:4.5,reviews:198,price:18.5},{title:"Project Hail Mary",author:"Andy Weir",image:"assets/images/school/book/img-04.jpg",rating:5,reviews:267,price:24.99},{title:"The Four Winds",author:"Kristin Hannah",image:"assets/images/school/book/img-05.jpg",rating:4.5,reviews:187,price:21.99},{title:"The Invisible Life of Addie LaRue",author:"V.E. Schwab",image:"assets/images/school/book/img-06.jpg",rating:4.5,reviews:210,price:23.49},{title:"Klara and the Sun",author:"Kazuo Ishiguro",image:"assets/images/school/book/img-07.jpg",rating:4.5,reviews:176,price:20.99},{title:"The Vanishing Half",author:"Brit Bennett",image:"assets/images/school/book/img-08.jpg",rating:5,reviews:231,price:19.5},{title:"Hamnet",author:"Maggie O'Farrell",image:"assets/images/school/book/img-09.jpg",rating:4.5,reviews:154,price:22.49},{title:"Mexican Gothic",author:"Silvia Moreno-Garcia",image:"assets/images/school/book/img-10.jpg",rating:4,reviews:189,price:18.99},{title:"The Guest List",author:"Lucy Foley",image:"assets/images/school/book/img-11.jpg",rating:4,reviews:203,price:17.99},{title:"Circe",author:"Madeline Miller",image:"assets/images/school/book/img-12.jpg",rating:5,reviews:267,price:21.5},{title:"The Push",author:"Ashley Audrain",image:"assets/images/school/book/img-01.jpg",rating:4,reviews:143,price:19.99},{title:"The Last Thing He Told Me",author:"Laura Dave",image:"assets/images/school/book/img-02.jpg",rating:4.5,reviews:178,price:23.99},{title:"The Paper Palace",author:"Miranda Cowley Heller",image:"assets/images/school/book/img-03.jpg",rating:4,reviews:156,price:20.99}],m=Object.freeze({booksPerPage:12,defaultPage:1}),t={};let o={currentPage:m.defaultPage,searchQuery:"",filteredBooks:[...g],totalPages:Math.ceil(g.length/m.booksPerPage)};const b=new Map;function I(e){if(b.has(e))return b.get(e);const i=Math.floor(e),s=e%1!==0,r=[];for(let n=0;n<i;n++)r.push('<i class="ri-star-fill"></i>');s&&r.push('<i class="ri-star-half-fill"></i>');const a=r.join("");return b.set(e,a),a}function P(e,i){return`
      <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
        <div class="card">
          <div class="d-flex align-items-center gap-3 card-body">
            <img src="${e.image}" loading="lazy" alt="${e.title}" class="h-40 rounded-3 cursor-pointer book-thumbnail" data-book-index="${i}">
            <div class="overflow-hidden flex-grow-1">
              <h6 class="mb-1 text-truncate lh-base"><a href="#!" class="link link-custom book-link" data-book-index="${i}">${e.title}</a></h6>
              <p class="mb-2 text-muted">By <a href="#!" class="link link-custom-success">${e.author}</a></p>
              <div class="text-warning d-flex gap-1 mb-2">
                ${I(e.rating)}
                <span class="text-dark-emphasis"> (${e.reviews})</span>
              </div>
              <h5 class="mb-2 fs-lg lh-base">$${e.price.toFixed(2)}</h5>
              <button type="button" class="w-100 btn btn-sub-danger">Buy Now</button>
            </div>
          </div>
        </div>
      </div>
    `}function f(){var v,k;const e=t.bookList;if(!e)return;const i=((k=(v=t.searchInput)==null?void 0:v.value)==null?void 0:k.trim().toLowerCase())||"";o.searchQuery=i,o.searchQuery!==o.lastSearchQuery&&(o.filteredBooks=i?g.filter(d=>d.title.toLowerCase().includes(i)||d.author.toLowerCase().includes(i)):[...g],o.lastSearchQuery=i,o.totalPages=Math.ceil(o.filteredBooks.length/m.booksPerPage),o.currentPage=1);const s=(o.currentPage-1)*m.booksPerPage,r=Math.min(s+m.booksPerPage,o.filteredBooks.length),a=o.filteredBooks.slice(s,r),n=document.createDocumentFragment(),l=document.createElement("div"),c=a.map((d,u)=>P(d,g.indexOf(d))).join("");for(l.innerHTML=c;l.firstChild;)n.appendChild(l.firstChild);if(e.innerHTML="",a.length===0)e.innerHTML=`
        <td colspan="6" class="text-center py-4">
            <div class="d-flex flex-column align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" class="mx-auto size-12" viewBox="0 0 48 48">
                    <linearGradient id="SVGID_1__h35ynqzIJzH4_gr1" x1="34.598" x2="15.982" y1="15.982" y2="34.598" gradientUnits="userSpaceOnUse">
                        <stop offset="0" stop-color="#60e8fe"></stop>
                        <stop offset=".033" stop-color="#6ae9fe"></stop>
                        <stop offset=".197" stop-color="#97f0fe"></stop>
                        <stop offset=".362" stop-color="#bdf5ff"></stop>
                        <stop offset=".525" stop-color="#dafaff"></stop>
                        <stop offset=".687" stop-color="#eefdff"></stop>
                        <stop offset=".846" stop-color="#fbfeff"></stop>
                        <stop offset="1" stop-color="#fff"></stop>
                    </linearGradient>
                    <path fill="url(#SVGID_1__h35ynqzIJzH4_gr1)" d="M40.036,33.826L31.68,25.6c0.847-1.739,1.335-3.684,1.335-5.748c0-7.27-5.894-13.164-13.164-13.164	S6.688,12.582,6.688,19.852c0,7.27,5.894,13.164,13.164,13.164c2.056,0,3.995-0.485,5.728-1.326l3.914,4.015l4.331,4.331	c1.715,1.715,4.496,1.715,6.211,0C41.751,38.321,41.751,35.541,40.036,33.826z"></path>
                    <path fill="none" stroke="#10cfe3" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3" d="M31.95,25.739l8.086,8.086c1.715,1.715,1.715,4.496,0,6.211l0,0c-1.715,1.715-4.496,1.715-6.211,0	l-4.331-4.331"></path>
                    <path fill="none" stroke="#10cfe3" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3" d="M7.525,24.511c-1.771-4.694-0.767-10.196,3.011-13.975c3.847-3.847,9.48-4.817,14.228-2.912"></path>
                    <path fill="none" stroke="#10cfe3" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3" d="M30.856,12.603c3.376,5.114,2.814,12.063-1.688,16.565c-4.858,4.858-12.565,5.129-17.741,0.814"></path>
                </svg>
                <p class="mt-2 text-center text-gray-500 dark:text-dark-500">No matching records found</p>
                <p class="text-muted mb-0">We couldn't find any categories matching your search.</p>
            </div>
        </td>
    `;else{const d=document.createDocumentFragment(),u=document.createElement("div"),w=a.map((p,h)=>P(p,g.indexOf(p))).join("");for(u.innerHTML=w;u.firstChild;)d.appendChild(u.firstChild);e.appendChild(d)}e.removeEventListener("click",M),e.addEventListener("click",M),S(),T()}function M(e){const i=e.target.closest("[data-book-index]");if(i){const s=parseInt(i.getAttribute("data-book-index"),10);if(!isNaN(s)&&g[s]){j(g[s]);const r=t.bookModal;r&&window.bootstrap&&new window.bootstrap.Modal(r).show()}}}function S(){const{paginationInfo:e}=t;if(!e)return;const i=o.filteredBooks.length,s=i===0?0:(o.currentPage-1)*m.booksPerPage+1,r=Math.min(o.currentPage*m.booksPerPage,i);e.innerHTML=`
        <p class="text-muted text-center text-md-start mb-3 mb-md-0">
            Showing <b class="me-1">${s}-${r}</b> of <b class="ms-1">${i}</b> Results
        </p>
    `}function T(){const{pagination:e}=t;if(!e)return;const i=e.querySelector(".page-item:first-child"),s=e.querySelector(".page-item:last-child");if(!i||!s)return;const r=e.innerHTML;let a="",n=Math.max(1,o.currentPage-2),l=Math.min(o.totalPages,n+4);l-n<4&&(n=Math.max(1,l-4)),a+=`
        <li class="page-item ${o.currentPage===1?"disabled":""}">
            <a class="page-link" href="#!" data-nav="prev"><i data-lucide="chevron-left" class="size-4"></i>Previous</a>
        </li>
    `;for(let c=n;c<=l;c++)a+=`
            <li class="page-item ${c===o.currentPage?"active":""}">
                <a class="page-link" href="#!" data-page="${c}">${c}</a>
            </li>
        `;a+=`
        <li class="page-item ${o.currentPage===o.totalPages||o.totalPages===0?"disabled":""}">
            <a class="page-link" href="#!" data-nav="next">Next <i data-lucide="chevron-right" class="size-4"></i></a>
        </li>
    `,a!==r&&(e.innerHTML=a,e.removeEventListener("click",L),e.addEventListener("click",L)),C({icons:E})}function L(e){e.preventDefault();const i=e.target.closest(".page-link");if(!i)return;const{nav:s,page:r}=i.dataset;if(s==="prev"&&o.currentPage>1)o.currentPage--,f();else if(s==="next"&&o.currentPage<o.totalPages)o.currentPage++,f();else if(r){const a=parseInt(r,10);a&&a!==o.currentPage&&(o.currentPage=a,f())}}let x=null;function j(e){const i=t.bookModal;if(!i||x===e)return;x=e;const s=i.querySelector("#bookOverviewContent img");s&&(s.src=e.image);const r=i.querySelector(".text-warning");if(r){let c=I(e.rating);c+=`<span class="text-dark-emphasis"> (${e.reviews})</span>`,r.innerHTML=c}const a=i.querySelector("#bookOverviewContent h6 a");a&&(a.textContent=e.title);const n=i.querySelector("#bookOverviewContent p.text-muted a");n&&(n.textContent=e.author);const l=i.querySelector("#bookOverviewContent h5");l&&(l.textContent=`$${e.price.toFixed(2)}`)}function H(e){return new Promise((i,s)=>{if(!e){s("No file selected");return}const r=new FileReader;r.onload=a=>{const n=new Image;n.onload=()=>{n.width<=105&&n.height<=160?i({valid:!0,dataUrl:a.target.result}):s(`Image dimensions (${n.width}x${n.height}) exceed maximum size of 105x160 pixels`)},n.onerror=()=>s("Invalid image file"),n.src=a.target.result},r.onerror=()=>s("Error reading file"),r.readAsDataURL(e)})}function $(){var i,s,r;if(t.bookList=document.getElementById("bookList"),t.searchInput=document.getElementById("searchInput"),t.pagination=document.querySelector(".pagination"),t.paginationInfo=document.querySelector(".pagination-info"),t.bookModal=document.getElementById("bookOverviewModal"),t.addBookModal=document.getElementById("addBookModal"),t.imageInput=(i=t.addBookModal)==null?void 0:i.querySelector('input[type="file"]'),t.imagePreview=document.getElementById("imagePreview"),t.imagePlaceholder=document.getElementById("imagePlaceholder"),t.imageError=document.getElementById("imageError"),t.addBookForm=(s=t.addBookModal)==null?void 0:s.querySelector("#addBookForm"),t.alertContainer=(r=t.addBookModal)==null?void 0:r.querySelector(".alert-book-modal"),t.searchInput){let a;t.searchInput.addEventListener("input",()=>{clearTimeout(a),a=setTimeout(()=>{o.currentPage=1,f()},300)})}t.imageInput&&t.imageInput.addEventListener("change",async function(){try{if(this.files&&this.files[0]){const a=await H(this.files[0]);t.imagePreview.src=a.dataUrl,t.imagePreview.classList.remove("d-none"),t.imagePlaceholder.classList.add("d-none"),t.imageError.classList.add("d-none"),t.alertContainer&&(t.alertContainer.innerHTML="")}}catch(a){t.imagePreview.classList.add("d-none"),t.imagePlaceholder.classList.remove("d-none"),t.imageError.classList.remove("d-none"),e(a),this.value=""}}),t.addBookForm&&(t.addBookForm.addEventListener("submit",function(n){n.preventDefault();const l=document.getElementById("bookTitleInput"),c=document.getElementById("writerNameInput"),v=document.getElementById("priceInput"),k=l.value.trim(),d=c.value.trim(),u=v.value.trim().replace("$",""),w=parseFloat(u),p=t.imageInput.files[0];let h=!0;if(k||(l.classList.add("is-invalid"),h=!1),d||(c.classList.add("is-invalid"),h=!1),(isNaN(w)||w<=0)&&(v.classList.add("is-invalid"),h=!1),p||(t.imageError.classList.remove("d-none"),h=!1),!h)return;const B={title:k,author:d,image:p?URL.createObjectURL(p):"assets/images/school/book/img-01.jpg",rating:5,reviews:0,price:w};if(g.unshift(B),this.reset(),t.imagePreview.classList.add("d-none"),t.imagePlaceholder.classList.remove("d-none"),o.currentPage=1,o.lastSearchQuery=null,f(),t.addBookModal&&window.bootstrap){const y=window.bootstrap.Modal.getInstance(t.addBookModal);y&&y.hide()}}),t.addBookForm.querySelectorAll("input").forEach(n=>{n.addEventListener("input",function(){this.classList.remove("is-invalid"),this.type==="file"&&t.imageError.classList.add("d-none")})}));function e(a){t.alertContainer&&(t.alertContainer.innerHTML=`
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
          <span>${a}</span>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      `)}f()}document.addEventListener("DOMContentLoaded",$);
